(function(e){function t(t){for(var c,o,s=t[0],a=t[1],l=t[2],_=0,d=[];_<s.length;_++)o=s[_],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],c=!0,s=1;s<n.length;s++){var a=n[s];0!==i[a]&&(c=!1)}c&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var c={},i={app:0},r=[];function o(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=c,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)o.d(n,c,function(t){return e[t]}.bind(null,c));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=a;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},5081:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),i=n("5502"),r=Object(i["a"])({state:function(){return{room_id:"",location:"location",organization:"organiztion",urls:["/api/v1/operator_settings"],operator:{},last_ticket:{num:0,prefix:"prefix",time:"",service:{id:0,name:"service"}},current_ticket:{num:0,prefix:"prefix",time:"",service:{id:0,name:"service"}},stat:{},services:[]}},mutations:{set_room_id:function(e,t){e.room_id=t},set_location:function(e,t){e.location=t},set_organization:function(e,t){e.organization=t},set_last_ticket:function(e,t){e.last_ticket=t},set_current_ticket:function(e,t){e.current_ticket=t},set_state:function(e,t){e.stat=t},set_operator:function(e,t){e.operator=t},set_services:function(e,t){e.services=t}},getters:{get_room_id:function(e){return e.room_id},get_url:function(e){return e.urls},get_location:function(e){return e.location},get_organization:function(e){return e.organization},get_last_ticket:function(e){return e.last_ticket},get_current_ticket:function(e){return e.current_ticket},get_state:function(e){return e.stat},get_operator:function(e){return e.operator},get_services:function(e){return e.services}}}),o=r,s=n("eefd"),a=n.n(s),l=n("daa8"),u=new a.a({debug:!0,connection:Object(l["a"])("/queue",{})}),_=u,d=(n("b0c0"),{key:0,class:"ticket"});function b(e,t,n,i,r,o){var s,a,l,u,_=Object(c["m"])("battons"),b=Object(c["m"])("status");return Object(c["h"])(),Object(c["d"])(c["a"],null,[Object(c["e"])("aside",null,[Object(c["e"])("h1",null,Object(c["n"])(e.$store.getters.get_organization),1),Object(c["f"])(_,{onCall_event:o.call_client,onSuccess_event:o.confirm_client,onDalay_event:o.delay_client,onCalldelay_event:o.call_delay_client,onChange_service:o.change_service_client},null,8,["onCall_event","onSuccess_event","onDalay_event","onCalldelay_event","onChange_service"]),null!==(s=e.$store.getters.get_current_ticket)&&void 0!==s&&s.num?(Object(c["h"])(),Object(c["d"])("div",d,[Object(c["e"])("span",null,Object(c["n"])(null===(a=e.$store.getters.get_current_ticket)||void 0===a?void 0:a.prefix)+Object(c["n"])(null===(l=e.$store.getters.get_current_ticket)||void 0===l?void 0:l.num),1),Object(c["e"])("span",null,Object(c["n"])(null===(u=e.$store.getters.get_current_ticket.service)||void 0===u?void 0:u.name),1)])):Object(c["c"])("",!0)]),Object(c["e"])("main",null,[Object(c["e"])("h1",null,Object(c["n"])(e.$store.getters.get_location),1),Object(c["f"])(b)])],64)}var v=n("bc3a"),f=n.n(v),O={class:"wrapp"},j={class:"union"},p=["value"];function m(e,t,n,i,r,o){return Object(c["h"])(),Object(c["d"])("div",O,[Object(c["e"])("div",{class:"button",onClick:t[0]||(t[0]=function(){return o.call_event&&o.call_event.apply(o,arguments)})},"вызвать"),Object(c["e"])("div",{class:"button",onClick:t[1]||(t[1]=function(){return o.success_event&&o.success_event.apply(o,arguments)})},"завершить"),Object(c["e"])("div",{class:"button",onClick:t[2]||(t[2]=function(){return o.dalay_event&&o.dalay_event.apply(o,arguments)})},"отложить"),Object(c["e"])("div",{class:"button",onClick:t[3]||(t[3]=function(){return o.calldelay_event&&o.calldelay_event.apply(o,arguments)})},"вызвать отложенного"),Object(c["e"])("div",j,[Object(c["q"])(Object(c["e"])("select",{class:"button","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.service_id=e})},[(Object(c["h"])(!0),Object(c["d"])(c["a"],null,Object(c["l"])(e.$store.getters.get_services,(function(e){return Object(c["h"])(),Object(c["d"])("option",{key:e,value:e.id},Object(c["n"])(e.name),9,p)})),128))],512),[[c["o"],r.service_id]]),Object(c["e"])("div",{class:"button",onClick:t[5]||(t[5]=function(){return o.change_service&&o.change_service.apply(o,arguments)})},"изменить услугу")])])}var g={data:function(){return{service_id:0}},methods:{call_event:function(){this.$emit("call_event")},success_event:function(){this.$emit("success_event")},dalay_event:function(){this.$emit("dalay_event")},calldelay_event:function(){this.$emit("calldelay_event")},change_service:function(){this.$emit("change_service",this.service_id)}}},h=(n("7200"),n("6b0d")),y=n.n(h);const k=y()(g,[["render",m],["__scopeId","data-v-7cdf7152"]]);var $=k,w=function(e){return Object(c["j"])("data-v-5b33bc43"),e=e(),Object(c["i"])(),e},x={class:"wrapper"},C=w((function(){return Object(c["e"])("h1",null,"Клиенты в очереди",-1)})),z={class:"my_table"},P=w((function(){return Object(c["e"])("thead",null,[Object(c["e"])("tr",null,[Object(c["e"])("td",null,"Услуга"),Object(c["e"])("td",null,"Ожидающие"),Object(c["e"])("td",null,"Отложенные")])],-1)})),S={class:"centr"},M={class:"centr"},T={class:"workers"};function q(e,t,n,i,r,o){var s,a;return Object(c["h"])(),Object(c["d"])(c["a"],null,[Object(c["e"])("div",x,[C,Object(c["e"])("table",z,[P,Object(c["e"])("tbody",null,[(Object(c["h"])(!0),Object(c["d"])(c["a"],null,Object(c["l"])(null===(s=e.$store.getters.get_state)||void 0===s?void 0:s.services,(function(e){return Object(c["h"])(),Object(c["d"])("tr",{key:e},[Object(c["e"])("td",null,Object(c["n"])(e.service.name),1),Object(c["e"])("td",S,Object(c["n"])(e.service.count),1),Object(c["e"])("td",M,Object(c["n"])(e.service.count_delay),1)])})),128))])])]),Object(c["e"])("div",T,[(Object(c["h"])(!0),Object(c["d"])(c["a"],null,Object(c["l"])(null===(a=e.$store.getters.get_state)||void 0===a?void 0:a.treatment,(function(e){return Object(c["h"])(),Object(c["d"])("div",{class:"label",key:e},[Object(c["e"])("span",null,Object(c["n"])(e.operator.name)+":",1),Object(c["e"])("span",null,Object(c["n"])(e.ticket.prefix)+Object(c["n"])(e.ticket.num),1)])})),128))])],64)}var D={};n("e68a");const I=y()(D,[["render",q],["__scopeId","data-v-5b33bc43"]]);var J=I,A={name:"App",components:{battons:$,status:J},created:function(){var e=this;this.init(),setTimeout((function(){e.$socket.emit("get_ticket",{})}),2e3)},methods:{init:function(){var e=this;f.a.get(this.$store.getters.get_url[0]).then((function(t){e.$store.commit("set_location",t.data.location),e.$store.commit("set_organization",t.data.organization),e.$store.commit("set_operator",t.data.operator),e.$store.commit("set_services",t.data.services)}))},call_client:function(){this.$socket.emit("call_client",{room:this.$store.getters.get_room_id})},confirm_client:function(){confirm("выполнить?")&&this.$socket.emit("confirm_client",{room:this.$store.getters.get_room_id})},delay_client:function(){confirm("выполнить?")&&this.$socket.emit("delay_client",{room:this.$store.getters.get_room_id})},call_delay_client:function(){this.$socket.emit("call_delay_client",{room:this.$store.getters.get_room_id})},change_service_client:function(e){confirm("выполнить?")&&this.$socket.emit("change_service_client",{room:this.$store.getters.get_room_id,service_id:e})}},sockets:{settings:function(e){this.$store.commit("set_room_id",e.room_id)},state:function(e){this.$store.commit("set_state",e)},ticket:function(e){this.$store.commit("set_current_ticket",null===e||void 0===e?void 0:e.ticket)}}};n("fd57");const U=y()(A,[["render",b]]);var V=U,B=Object(c["b"])(V);B.use(o),B.use(_),B.mount("#app")},7200:function(e,t,n){"use strict";n("c7ee")},c7ee:function(e,t,n){},e482:function(e,t,n){},e68a:function(e,t,n){"use strict";n("e482")},fd57:function(e,t,n){"use strict";n("5081")}});
//# sourceMappingURL=app.8133db00.js.map