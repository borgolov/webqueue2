(function(t){function e(e){for(var i,r,s=e[0],a=e[1],u=e[2],f=0,d=[];f<s.length;f++)r=s[f],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);l&&l(e);while(d.length)d.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],i=!0,s=1;s<n.length;s++){var a=n[s];0!==o[a]&&(i=!1)}i&&(c.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},o={app:0},c=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=a;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7a23"),o=(n("a434"),n("5502")),c=Object(o["a"])({state:function(){return{room_id:"",location:"location",organization:"organiztion",device:{id:null,name:"device_name"},urls:["/api/v1/device_settings","http://192.168.3.249/slider_reg"],last_ticket:{num:0,prefix:"",time:"",service:{id:0,name:"service"}},notifiations:[],stat:{}}},mutations:{set_room_id:function(t,e){t.room_id=e},set_location:function(t,e){t.location=e},set_organization:function(t,e){t.organization=e},set_device:function(t,e){t.device=e},set_last_ticket:function(t,e){t.last_ticket=e},add_notification:function(t,e){t.notifiations.push(e)},del_notification:function(t){t.notifiations.splice(0,1)},set_state:function(t,e){t.stat=e}},getters:{get_room_id:function(t){return t.room_id},get_url:function(t){return t.urls},get_location:function(t){return t.location},get_organization:function(t){return t.organization},get_device:function(t){return t.device},get_last_ticket:function(t){return t.last_ticket},get_notification:function(t){return t.notifiations},get_first_notification:function(t){return t.notifiations.length>0?t.notifiations[0]:{}},get_state:function(t){return t.stat}}}),r=c,s=n("eefd"),a=n.n(s),u=n("daa8"),l=new a.a({debug:!0,connection:Object(u["a"])("/queue",{})}),f=l,d={key:0,class:"settings"},b=["value"],p=Object(i["f"])("input",{type:"checkbox",id:"title",hidden:""},null,-1),v=["src"];function _(t,e,n,o,c,r){var s=Object(i["n"])("treatments"),a=Object(i["n"])("modalwindow");return Object(i["i"])(),Object(i["e"])(i["a"],null,[Object(i["f"])("aside",null,[Object(i["f"])("h1",{onClick:e[0]||(e[0]=function(t){c.settings=!c.settings,r.get_voices()})},Object(i["o"])(t.$store.getters.get_organization),1),c.settings?(Object(i["i"])(),Object(i["e"])("div",d,[Object(i["r"])(Object(i["f"])("select",{class:"input","onUpdate:modelValue":e[1]||(e[1]=function(t){return c.voic=t})},[(Object(i["i"])(!0),Object(i["e"])(i["a"],null,Object(i["m"])(c.voices,(function(t){return Object(i["i"])(),Object(i["e"])("option",{key:t,value:t},Object(i["o"])(t.voiceURI),9,b)})),128))],512),[[i["p"],c.voic]]),Object(i["f"])("button",{class:"input",onClick:e[2]||(e[2]=function(t){return c.voic=null})},"убрать голос")])):Object(i["d"])("",!0),p,Object(i["g"])(s)]),Object(i["f"])("main",null,[Object(i["f"])("h1",null,Object(i["o"])(t.$store.getters.get_location),1),Object(i["f"])("iframe",{src:t.$store.getters.get_url[1],frameBorder:"0"},null,8,v)]),c.modal?(Object(i["i"])(),Object(i["c"])(a,{key:0,ticket:t.$store.getters.get_first_notification.ticket,operator:t.$store.getters.get_first_notification.operator},null,8,["ticket","operator"])):Object(i["d"])("",!0)],64)}n("ac1f"),n("5319");var g=n("bc3a"),m=n.n(g),O=(n("b0c0"),{class:"wrapp"}),h={class:"window"},j={class:"operator"},k={class:"ticket"};function y(t,e,n,o,c,r){return Object(i["i"])(),Object(i["e"])("div",O,[Object(i["f"])("div",h,[Object(i["f"])("span",j,Object(i["o"])(n.operator.name),1),Object(i["f"])("span",k,Object(i["o"])(n.ticket.prefix)+Object(i["o"])(n.ticket.num),1)])])}var w={props:["ticket","operator"]},$=(n("ba68"),n("6b0d")),x=n.n($);const S=x()(w,[["render",y],["__scopeId","data-v-680929f8"]]);var z=S,P={class:"treatments"};function T(t,e,n,o,c,r){return Object(i["i"])(),Object(i["e"])("div",P,[(Object(i["i"])(!0),Object(i["e"])(i["a"],null,Object(i["m"])(t.$store.getters.get_state.treatment,(function(t){return Object(i["i"])(),Object(i["e"])("div",{class:"operator",key:t},[Object(i["f"])("span",null,Object(i["o"])(t.operator.name),1),Object(i["f"])("span",null,Object(i["o"])(t.ticket.prefix)+Object(i["o"])(t.ticket.num),1)])})),128))])}var M={};n("fbb2");const I=x()(M,[["render",T],["__scopeId","data-v-e74b8dea"]]);var U=I,q={name:"App",components:{modalwindow:z,treatments:U},data:function(){return{modal:!1,settings:!1,voices:[],voic:null,utterance:null}},created:function(){var t=this;setTimeout((function(){t.init()}),500)},methods:{init:function(){var t=this;m.a.get(this.$store.getters.get_url[0]).then((function(e){t.$store.commit("set_location",e.data.location),t.$store.commit("set_device",e.data.device),t.$store.commit("set_organization",e.data.organization),console.log(e.data)}))},show_modal:function(){var t=this;document.querySelector("#title").click(),this.$store.getters.get_notification.length>0&&0==this.modal&&(this.modal=!0,null!=this.voic?this.voice():setTimeout((function(){t.modal=!1,t.$store.commit("del_notification"),setTimeout((function(){t.show_modal()}),500)}),3e3))},voice:function(){var t,e,n,i=this,o=(null===(t=this.$store.getters.get_first_notification.ticket)||void 0===t?void 0:t.prefix)+(null===(e=this.$store.getters.get_first_notification.ticket)||void 0===e?void 0:e.num);this.utterance=new SpeechSynthesisUtterance(null===(n=this.$store.getters.get_first_notification.operator)||void 0===n?void 0:n.duber.replace("@",o)),this.utterance.addEventListener("end",(function(){i.$store.commit("del_notification"),i.modal=!1,setTimeout((function(){i.show_modal()}),500)})),this.utterance.voice=this.voic,speechSynthesis.speak(this.utterance)},cli:function(){console.log("click")},get_voices:function(){this.voices=speechSynthesis.getVoices()}},sockets:{call_client:function(t){this.$store.commit("add_notification",t),this.show_modal()},state:function(t){this.$store.commit("set_state",t)}}};n("ff44");const C=x()(q,[["render",_]]);var J=C,V=Object(i["b"])(J);V.use(r),V.use(f),V.mount("#app")},"775d":function(t,e,n){},ba68:function(t,e,n){"use strict";n("775d")},c872:function(t,e,n){},f417:function(t,e,n){},fbb2:function(t,e,n){"use strict";n("c872")},ff44:function(t,e,n){"use strict";n("f417")}});
//# sourceMappingURL=app.0a381260.js.map